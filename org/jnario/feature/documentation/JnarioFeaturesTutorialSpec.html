<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Jnario Features - Tutorial</title>
<meta name="description" content="">
<meta name="author" content="Jnario">

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le styles -->
<link rel="stylesheet" href="../../../../css/bootstrap.min.css">
<link rel="stylesheet" href="../../../../css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="../../../../css/custom.css">
<link rel="stylesheet" href="../../../../css/prettify.css">
<script type="text/javascript" src="../../../../js/prettify.js"></script>
<script type="text/javascript" src="../../../../js/lang-jnario.js"></script>
</head>

<body onload="prettyPrint()">
	<div class="container">
		<div class="content">
			<div class="page-header">
				<h1>Jnario Features - Tutorial</h1>
			</div>
			<div class="row">
				<div class="span12">
<p>Jnario Features is based on <a href="http://www.xtend-lang.org">Xtend</a>. It is a good idea to read the Xtend <a href="http://www.eclipse.org/xtend/documentation/index.html">documentation</a> before you get started with Jnario, because expressions, fields, methods and extensions in Jnario work exactly as in Xtend.</p><h3>Installation</h3><p>Jnario currently requires <a href="http://www.eclipse.org">Eclipse</a> 3.5 or higher with <a href="http://www.xtext.org">Xtext</a> 2.3, and a Java SDK version 5 or above. You can install the most recent version from this update site: <code>http://www.jnario.org/updates/snapshot/</code>. Jnario requires a small runtime library that contains the JUnit integration. You can download the jar <a href="http://jnario.org/updates/snapshot/org.jnario.lib-0.1.0-SNAPSHOT.jar">here</a>.</p>
<h3>How to write a Feature</h3>
<p><p>The first example for using Jnario Features is the specification of a calculator. Start out with creating a new file (<strong>File</strong> -&gt; <strong>New</strong> -&gt; <strong>File</strong>) and giving it the file extension *.feature.</p><p>A feature file consists of the a feature and the scenarios that are the acceptance criteria for the feature. For the calculator the the feature description in form of a story and one scenario for adding numbers looks as follows:</p>
<pre class="prettyprint lang-feature">
Feature: Calculator

  As a math dummy
  I want a calculator that helps me with basic math operations
  In order to check my capabilities

  Scenario: Adding two numbers

    Given a calculator
    When I enter two numbers and press add
    Then it should show the sum
</pre><p>When you save the file an xtend-gen folder will be created and the corresponding generated java files will be created. Those files can be executed as JUnit-Tests. Right click and select <strong>Run As</strong> -&gt; **JUnit Test</p><p>You will see the result of the run and it will be green. Since the steps from scenario are not implemented yet the <strong>When</strong> and <strong>Then</strong> steps will be marked as <em>PENDING</em> as an reminder that there is still work to do.</p>
</p>
<ul><li><p>
<strong>Multiple steps</strong>
<p>A feature consists of the name of the feature and a number of scenarios. Those scenarios are examples for the behavior that is expected from the feature. For the calculator those could be scenarios like addition or subtraction.</p><p>Each scenario is defined by the steps that describe the expected behavior. <strong>Given</strong> steps give all the necessary information about the context of the scenario. <strong>When</strong> describes the action and <strong>Then</strong> describes the expected outcome that will be verified.</p><p>Necessary keywords for describing a feature are <strong>Feature</strong>, <strong>Scenario</strong>, <strong>Given</strong>, <strong>When</strong>, <strong>Then</strong>. The names and the step descriptions are free text. You can define multiple steps with the same keyword. If you don't want to repeat <strong>Given</strong> over and over again you can use the keyword <strong>And</strong> in exchange.</p>
<pre class="prettyprint lang-feature">
package demo

Feature: Calculator
  In order to check my capabilities
  As a math dummy
  I want a calculator that helps me with basic math operations
          
  Scenario: Dividing two numbers

    Given a calculator
    When I enter the number 70
    And I enter the number 10
    And I press divide
    Then it should show 7</pre>
</p>
</li><li><p>
<strong>Step definition</strong>
<p>After defining a scenario with its steps to be able to execute it the necessary code has to be added to steps. For each step the implementation is done directly after the description of the step. The language used to define the logic is <a href="http://www.eclipse.org/xtend/documentation/index.html#fields">Xtend</a>.</p><p>Running the feature file now will not be possible since the type Calculator is unknown. Create a Java class with the name Calculator in the same project as your feature file. Add the necessary import to the feature file or include it by auto completion while typing (CTRL + SPACE).</p><p><span class="label label-info">Info</span> Specifying the package and declaring and importing other packages works similar to Xtend (static imports work as well).</p>
<pre class="prettyprint lang-feature">
package demo
import tutorialtest.math.Calculator

Feature: Calculator

Scenario: Adding two numbers
  Given a calculator
    var calculator = new Calculator</pre>
</p>
</li><li><p>
<strong>Define fields for steps</strong>
<p>In the <strong>When</strong> step the calculator has to be used to call a method on the object. To define variables that can be used from the steps within one scenario declare them as fields after the scenario description.</p><p>Also define a method add for the calculator that takes two int values as parameters and returns an int.</p>
<pre class="prettyprint lang-feature">
package demo
import tutorialtest.math.Calculator

Feature: Calculator

Scenario: Adding two numbers
  Calculator calculator
  Given a calculator
    calculator = new Calculator
  When I enter two numbers and press add
    var result = calculator.add(20,70)</pre>
</p>
</li><li><p>
<strong>Behavior assertions</strong>
<p>The <strong>Then</strong> step will be the behavior assertion. For writing readable short assertions different additional assertions come with Jnario. All of the possibilities are described <a href="/org/jnario/spec/tests/integration/AssertionSpec.html">here</a>.</p><p>For describing the expected result of an expression <code>=&gt;</code> is used.</p>
<pre class="prettyprint lang-feature">
package demo
import tutorialtest.math.Calculator

Feature: Calculator

Scenario: Adding two numbers
  Calculator calculator
  int result
  Given a calculator
    calculator = new Calculator
  When I enter two numbers and press add
    result = calculator.add(20,70)
  Then it should show the expected result
    result =&gt; 90</pre>
</p>
</li><li><p>
<strong>Background</strong>
<p><strong>Given</strong> steps that are used in all scenarios of the same feature can be defined in a <code>Background</code>. All steps defined as background steps will be executed for each scenario before the steps from the individual scenarios are executed.</p>
<pre class="prettyprint lang-feature">
package demo
import tutorialtest.math.Calculator

Feature: Calculator

Background:
  Calculator calculator
  Given a calculator

Scenario: Adding two numbers
  int result
  When I enter two numbers and press add
    result = calculator.add(20,70)
  Then it should show the expected result
    result =&gt; 90
  
Scenario: Dividing two numbers
 When I enter the number 70
 And I enter the number 10
 And I press divide
 Then it should show 7</pre>
</p>
</li><li><p>
<strong>Example tables</strong>
<p>Often you want to verify the behavior of a scenario with multiple examples. In case of the calculator you might want to define what happens using negative numbers or large numbers. In this case you can define a table with values that can be used by the scenario steps. Each scenario will be executed separately for each row in the table.</p><p>The header of the example table serves as field declaration of the header names. The type is derived from the common super type of a column.</p>
<pre class="prettyprint lang-feature">
package demo
import tutorialtest.math.Calculator

Feature: Calculator

Scenario: Adding two numbers
  Calculator calculator
  int result
  Given a calculator
    calculator = new Calculator
  When I enter two numbers and press add
    result = calculator.add(a,b)
  Then it should show the expected result
    result =&gt; expectedResult
    
  Examples: Possible addition values
  | a    | b    | expectedResult  |
  | 0    | 0    | 0          |
  | 21  | 21  | 42        |
  | -3  | -5  | -8        |</pre>
</p>
</li><li><p>
<strong>Step references</strong>
<p>Once a step is defined including the execution code it can be referenced from other scenarios. The textual description of the step serves as identifier. When you reuse the step in a different scenario and provide no implementation the existing implementation from the referenced step will be used for this step.</p><p>Referenced steps are highlighted in grey so you see when you are actually using a referenced step. You can also jump directly to the original step declaration to have a look at the implementation.</p>
<pre class="prettyprint lang-feature">
package demo
import tutorialtest.math.Calculator

Feature: Calculator

Background:
  Calculator calculator
  Given a calculator
    calculator = new Calculator

Scenario: Adding two numbers
  int result
  When I enter two numbers and press add
    result = calculator.add(a,b)
  Then it should show the expected result
    result =&gt; expected_result
    
  Examples:
  | a    | b    | expected_result  |
  | 0    | 0    | 0          |
  | -3  | -5  | -8        |
  
Scenario: Dividing two numbers
  double result
 When I enter two numbers and press divide
   result = calculator.divide(a,b)
 Then it should show the expected result
 
 Examples:
 | a    | b    | expected_result  |
 | 8    | 1    | 8                |</pre>
</p>
</li></ul>
				</div>
			</div>
		</div> <!-- /content -->
		<footer>
			<p><small>Generated by <a href="http://www.jnario.org">Jnario</a>.</small></p>
		</footer>

	</div>
	<!-- /container -->

</body>
</html>
